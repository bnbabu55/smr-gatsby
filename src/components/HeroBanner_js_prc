import React from "react"
import { useStaticQuery, graphql } from "gatsby"
import { GatsbyImage } from "gatsby-plugin-image"
// import SwiperCore, { Autoplay } from "swiper"
// import { Swiper, SwiperSlide } from "swiper/react"
import { CarouselProvider, Slider, Slide } from "pure-react-carousel"
import "pure-react-carousel/dist/react-carousel.es.css"

// SwiperCore.use([Autoplay])

const HeroBanner = () => {
  const { bannerSlides } = useStaticQuery(graphql`
    query {
      bannerSlides: allMarkdownRemark(
        filter: { fileAbsolutePath: { regex: "/home-banner/" } }
        sort: { fields: fileAbsolutePath, order: ASC }
      ) {
        nodes {
          id
          html
          frontmatter {
            title1
            title2
            titleStyles
            subTitle1
            subTitle2
            subTitleStyles
            altTxt
            featuredImage {
              childImageSharp {
                gatsbyImageData(
                  quality: 90
                  width: 1400
                  placeholder: BLURRED
                  formats: [AUTO, WEBP, AVIF]
                )
              }
            }
          }
        }
      }
    }
  `)

  return (
    <section
      id="hero-banner"
      className="bg-white border-b-4 border-themeGray-100 shadow-themeShadow"
    >
      {typeof window !== "undefined" && (
        <CarouselProvider
          naturalSlideWidth={1350}
          naturalSlideHeight={510}
          totalSlides={bannerSlides?.nodes.length}
          // onSlideChange={() => console.log("slide change")}
          // onSwiper={swiper => console.log(swiper)}
        >
          <Slider>
            {bannerSlides?.nodes.map((bannerSlide, index) => {
              return (
                <Slide
                  index={index}
                  key={bannerSlide?.id}
                  innerClassName="relative"
                >
                  <figure className="overflow-hidden w-full">
                    <GatsbyImage
                      image={
                        bannerSlide?.frontmatter?.featuredImage?.childImageSharp
                          ?.gatsbyImageData
                      }
                      alt="Home slider 1"
                    />
                  </figure>
                  <div className={`${bannerSlide?.frontmatter?.titleStyles}`}>
                    {bannerSlide?.frontmatter?.title1} <br />
                    {bannerSlide?.frontmatter?.title2}
                  </div>
                  <div
                    className={`${bannerSlide?.frontmatter?.subTitleStyles}`}
                  >
                    {bannerSlide?.frontmatter?.subTitle1} <br />
                    {bannerSlide?.frontmatter?.subTitle2}
                    {bannerSlide?.frontmatter?.subTitle3}
                  </div>
                </Slide>
              )
            })}
          </Slider>
        </CarouselProvider>
      )}
    </section>
  )
}

export default HeroBanner
